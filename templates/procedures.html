{% extends "layout.html" %}{% block title %}施術から探す{% endblock %}{% block content %}<h2>施術から探す</h2><div class="search-box"><form method="get" action="{{ url_for('show_procedures') }}"><input type="text" name="q" placeholder="施術名で検索..." value="{{ search_query or '' }}"><select name="sort" onchange="this.form.submit()"><option value="name_asc" {% if sort_by == 'name_asc' %}selected{% endif %}>名前 昇順</option><option value="price_asc" {% if sort_by == 'price_asc' %}selected{% endif %}>価格が安い順</option><option value="clinic_count_desc" {% if sort_by == 'clinic_count_desc' %}selected{% endif %}>取扱クリニック数が多い順</option></select><button type="submit">検索</button></form></div><div class="results-list">{% for proc in procedures %}<div class="result-item"><h3><a href="{{ url_for('show_procedure_detail', procedure_id=proc.procedure_id) }}">{{ proc.name }}</a></h3><p>{{ proc.description }}</p><div class="summary-info"><span>取扱クリニック: <strong>{{ proc.clinic_count }}</strong> 件</span>{% if proc.min_price %}<span>最安価格: <strong>&yen;{{ "{:,.0f}".format(proc.min_price) }}〜</strong></span>{% endif %}</div></div>{% else %}<p>該当する施術が見つかりませんでした。</p>{% endfor %}</div>{% if total_pages > 1 %}<nav class="pagination"><ul>{% if page > 1 %}<li><a href="{{ url_for('show_procedures', page=page-1, q=search_query, sort=sort_by) }}">&laquo; 前へ</a></li>{% endif %}{% for p in range(1, total_pages + 1) %}<li class="{{ 'active' if p == page else '' }}"><a href="{{ url_for('show_procedures', page=p, q=search_query, sort=sort_by) }}">{{ p }}</a></li>{% endfor %}{% if page < total_pages %}<li><a href="{{ url_for('show_procedures', page=page+1, q=search_query, sort=sort_by) }}">&raquo; 次へ</a></li>{% endif %}</ul></nav>{% endif %}{% endblock %}
